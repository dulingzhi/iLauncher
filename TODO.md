# iLauncher - Tauri é‡æ„è®¡åˆ’

> åŸºäº Wox åŠŸèƒ½åˆ†æçš„å®Œæ•´é‡æ„æ–¹æ¡ˆ
> 
> æ—¥æœŸ: 2025å¹´11æœˆ3æ—¥

---

## ğŸ“‹ ç›®å½•

- [Wox åŠŸèƒ½åˆ†æ](#wox-åŠŸèƒ½åˆ†æ)
- [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [æ¨¡å—è®¾è®¡](#æ¨¡å—è®¾è®¡)
- [å®æ–½è·¯çº¿å›¾](#å®æ–½è·¯çº¿å›¾)
- [å¼€å‘ä»»åŠ¡](#å¼€å‘ä»»åŠ¡)

---

## ğŸ” Wox åŠŸèƒ½åˆ†æ

### æ ¸å¿ƒæ¶æ„

Wox é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼ŒåŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Wox åŸå§‹æ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  wox.ui.flutter (Flutter) - UI å±‚                   â”‚
â”‚  â†• WebSocket + HTTP                                 â”‚
â”‚  wox.core (Go) - æ ¸å¿ƒåç«¯                           â”‚
â”‚  â†• WebSocket                                        â”‚
â”‚  Plugin Hosts (Python/Node.js) - æ’ä»¶å®¿ä¸»           â”‚
â”‚  â†•                                                  â”‚
â”‚  Plugins - å„ç±»æ’ä»¶                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### 1. ç³»ç»Ÿæ’ä»¶
- **App**: åº”ç”¨æœç´¢å’Œå¯åŠ¨
- **Calculator**: æ•°å­¦è®¡ç®—å™¨ï¼ˆæ”¯æŒå¤æ‚å‡½æ•°ï¼‰
- **File**: æ–‡ä»¶æœç´¢å’Œç®¡ç†
- **Clipboard**: å‰ªè´´æ¿å†å²
- **MediaPlayer**: åª’ä½“æ’­æ”¾å™¨æ§åˆ¶
- **WebSearch**: Web æœç´¢
- **Converter**: å•ä½è½¬æ¢
- **Browser**: æµè§ˆå™¨ä¹¦ç­¾æœç´¢
- **AI Command**: AI å‘½ä»¤æ‰§è¡Œ
- **Chat**: AI èŠå¤©ï¼ˆæ”¯æŒ MCP åè®®ï¼‰

#### 2. æ’ä»¶ç³»ç»Ÿç‰¹æ€§

**è„šæœ¬æ’ä»¶**
- å•æ–‡ä»¶å®ç°
- æŒ‰éœ€æ‰§è¡Œï¼ˆæ— å¸¸é©»è¿›ç¨‹ï¼‰
- æ”¯æŒ Pythonã€JavaScriptã€Bash
- é€šè¿‡æ³¨é‡Šå®šä¹‰å…ƒæ•°æ®
- JSON-RPC æ ‡å‡†è¾“å…¥è¾“å‡ºé€šä¿¡
- 10ç§’æ‰§è¡Œè¶…æ—¶é™åˆ¶

**å®Œæ•´åŠŸèƒ½æ’ä»¶**
- ç‹¬ç«‹è¿›ç¨‹è¿è¡Œ
- WebSocket é€šä¿¡
- æŒä¹…åŒ–çŠ¶æ€ç®¡ç†
- æ”¯æŒ Python (`wox-plugin`) å’Œ Node.js (`@wox-launcher/wox-plugin`)
- ä¸°å¯Œçš„ API æ”¯æŒï¼ˆAIã€è®¾ç½®ã€é¢„è§ˆï¼‰
- å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†

#### 3. æŸ¥è¯¢ç³»ç»Ÿ

**è¾“å…¥æŸ¥è¯¢**
```
æ ¼å¼: [è§¦å‘å…³é”®è¯] [å‘½ä»¤] [æœç´¢å†…å®¹]
ç¤ºä¾‹:
  - "wpm install emoji" - è§¦å‘è¯:wpm, å‘½ä»¤:install, æœç´¢:emoji
  - "emoji smile" - è§¦å‘è¯:emoji, æœç´¢:smile
  - "mail" - å…¨å±€æœç´¢:mail
```

**é€‰æ‹©æŸ¥è¯¢**
- é€‰ä¸­æ–‡ä»¶/æ–‡æœ¬ä½œä¸ºæŸ¥è¯¢
- æ”¯æŒæ‹–æ‹½æ“ä½œ

#### 4. æ ¸å¿ƒ API

```go
type API interface {
    ChangeQuery(ctx, query)          // æ”¹å˜æŸ¥è¯¢
    HideApp(ctx)                     // éšè—åº”ç”¨
    ShowApp(ctx)                     // æ˜¾ç¤ºåº”ç”¨
    Notify(ctx, description)         // é€šçŸ¥
    Log(ctx, level, msg)             // æ—¥å¿—
    GetTranslation(ctx, key)         // ç¿»è¯‘
    GetSetting(ctx, key)             // è·å–è®¾ç½®
    SaveSetting(ctx, key, value)     // ä¿å­˜è®¾ç½®
    OnSettingChanged(ctx, callback)  // è®¾ç½®å˜æ›´ç›‘å¬
    RegisterQueryCommands(ctx, cmds) // æ³¨å†Œå‘½ä»¤
    AIChatStream(ctx, ...)           // AI æµå¼èŠå¤©
}
```

#### 5. æ’ä»¶é…ç½® (plugin.json)

```json
{
  "Id": "plugin-uuid",
  "Name": "Plugin Name",
  "Author": "Author Name",
  "Version": "1.0.0",
  "MinWoxVersion": "2.0.0",
  "Runtime": "Python|Nodejs|Dotnet",
  "Icon": "icon.png",
  "EntryFile": "main.py",
  "SupportedOS": ["Windows", "Linux", "Macos"],
  "TriggerKeywords": ["keyword1", "keyword2"],
  "Commands": [
    {"Command": "install", "Description": "Install plugin"}
  ],
  "Settings": [
    {
      "Type": "textbox|checkbox|select|head|newline",
      "Value": { "Key": "setting_key", "Label": "Label" }
    }
  ]
}
```

#### 6. ä¸»é¢˜ç³»ç»Ÿ

- JSON æ ¼å¼ä¸»é¢˜é…ç½®
- æ”¯æŒè‡ªå®šä¹‰é¢œè‰²ã€å­—ä½“ã€é—´è·
- ç³»ç»Ÿå†…ç½®ä¸»é¢˜
- ç”¨æˆ·è‡ªå®šä¹‰ä¸»é¢˜
- AI ç”Ÿæˆä¸»é¢˜

#### 7. å…¶ä»–ç‰¹æ€§

- **çƒ­é”®ç®¡ç†**: ä¸»çƒ­é”®ã€é€‰æ‹©çƒ­é”®ã€æŸ¥è¯¢çƒ­é”®
- **MRU (Most Recently Used)**: æœ€è¿‘ä½¿ç”¨è®°å½•
- **è‡ªåŠ¨å¤‡ä»½**: è®¾ç½®å’Œæ•°æ®å¤‡ä»½
- **è‡ªåŠ¨æ›´æ–°**: æ£€æŸ¥å’Œå®‰è£…æ›´æ–°
- **å¤šè¯­è¨€**: i18n æ”¯æŒ
- **æ‰˜ç›˜å›¾æ ‡**: ç³»ç»Ÿæ‰˜ç›˜é›†æˆ
- **æ·±åº¦é“¾æ¥**: `wox://` åè®®æ”¯æŒ
- **Action Panel**: `Alt+J` æ˜¾ç¤ºæ›´å¤šæ“ä½œ

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### iLauncher Tauri æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Tauri Application                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚     React UI Layer (TypeScript)            â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ SearchBox (ä¸»æœç´¢æ¡†)                â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ ResultList (ç»“æœåˆ—è¡¨)               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ ActionPanel (æ“ä½œé¢æ¿)              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ SettingsView (è®¾ç½®ç•Œé¢)             â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ PluginStore (æ’ä»¶å•†åº—)              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ ThemeEditor (ä¸»é¢˜ç¼–è¾‘å™¨)            â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                       â†•                             â”‚
â”‚              Tauri IPC Commands                     â”‚
â”‚                       â†•                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      Rust Backend Core (Tauri)             â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ LauncherEngine                       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ PluginManager                   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ QueryProcessor                  â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ IndexService                    â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚   â”œâ”€ AppIndex                    â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”‚   â””â”€ FileIndex                   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ HotkeyManager                   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ SettingsManager                 â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â”œâ”€ ThemeEngine                     â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€ AIService                       â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                       â†•                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         Plugin Hosts & Runners              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚
â”‚  â”‚  â”‚ Python â”‚ â”‚ Node.jsâ”‚ â”‚ Script â”‚         â”‚    â”‚
â”‚  â”‚  â”‚  Host  â”‚ â”‚  Host  â”‚ â”‚ Runner â”‚         â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                       â†•                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              User Plugins                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥ â†’ SearchBox
    â†“
Tauri Command: query(input)
    â†“
QueryProcessor.process(input)
    â†“ (è§£æ: trigger_keyword, command, search)
PluginManager.dispatch(query)
    â†“ (åˆ†å‘åˆ°åŒ¹é…çš„æ’ä»¶)
[Plugin1, Plugin2, ...].query(context)
    â†“ (å¹¶å‘æ‰§è¡Œ)
èšåˆç»“æœ â†’ æ’åº â†’ è¯„åˆ†
    â†“
è¿”å› UI â†’ ResultList æ¸²æŸ“
    â†“ (ç”¨æˆ·é€‰æ‹©)
æ‰§è¡Œ Action â†’ execute_action(result_id, action_id)
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯æ ˆ

```json
{
  "framework": "React 18+",
  "language": "TypeScript 5+",
  "stateManagement": "Zustand / Jotai",
  "styling": "Tailwind CSS",
  "components": "Radix UI / Headless UI",
  "animation": "Framer Motion",
  "virtualization": "React Virtual",
  "icons": "Lucide React",
  "build": "Vite"
}
```

### åç«¯æŠ€æœ¯æ ˆ (Rust)

```toml
[dependencies]
# Tauri Core
tauri = { version = "2", features = ["macos-private-api"] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"

# å¼‚æ­¥è¿è¡Œæ—¶
tokio = { version = "1", features = ["full"] }
async-trait = "0.1"

# æ•°æ®åº“
sqlx = { version = "0.7", features = ["sqlite", "runtime-tokio", "migrate"] }

# æœç´¢å¼•æ“
tantivy = "0.21"          # å…¨æ–‡æœç´¢
fuzzy-matcher = "0.3"     # æ¨¡ç³ŠåŒ¹é…
nucleo = "0.2"            # å¿«é€Ÿæ¨¡ç³Šæœç´¢ï¼ˆç±»ä¼¼ fzfï¼‰

# ç³»ç»Ÿé›†æˆ
global-hotkey = "0.5"     # å…¨å±€çƒ­é”®
notify = "6"              # æ–‡ä»¶ç³»ç»Ÿç›‘å¬
directories = "5"         # ç³»ç»Ÿç›®å½•
sysinfo = "0.30"          # ç³»ç»Ÿä¿¡æ¯

# HTTP & Network
reqwest = { version = "0.11", features = ["json"] }
tokio-tungstenite = "0.21" # WebSocket

# æ’ä»¶ç³»ç»Ÿ
pyo3 = { version = "0.20", features = ["auto-initialize"] } # Python
# æˆ–ä½¿ç”¨ç‹¬ç«‹è¿›ç¨‹é€šä¿¡
serde_json = "1"

# AI é›†æˆ
async-openai = "0.20"
anthropic-sdk = "0.1"     # Claude
ollama-rs = "0.1"         # Ollama æœ¬åœ°æ¨¡å‹

# å·¥å…·åº“
regex = "1"
chrono = "0.4"
uuid = { version = "1", features = ["v4", "serde"] }
anyhow = "1"
thiserror = "1"
tracing = "0.1"
tracing-subscriber = "0.3"

# å¹³å°ç‰¹å®š
[target.'cfg(windows)'.dependencies]
windows = { version = "0.52", features = ["Win32_UI_Shell", "Win32_System_Registry"] }

[target.'cfg(target_os = "macos")'.dependencies]
cocoa = "0.25"
objc = "0.2"

[target.'cfg(target_os = "linux")'.dependencies]
freedesktop-entry-parser = "1"
```

---

## ğŸ“¦ æ¨¡å—è®¾è®¡

### 1. æ ¸å¿ƒå¼•æ“ (Core Engine)

#### æ–‡ä»¶ç»“æ„
```
src-tauri/src/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ mod.rs              # æ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ engine.rs           # LauncherEngine ä¸»å¼•æ“
â”‚   â”œâ”€â”€ query.rs            # QueryProcessor æŸ¥è¯¢å¤„ç†
â”‚   â””â”€â”€ types.rs            # æ ¸å¿ƒç±»å‹å®šä¹‰
```

#### æ ¸å¿ƒç±»å‹
```rust
// src-tauri/src/core/types.rs

/// æŸ¥è¯¢ä¸Šä¸‹æ–‡
pub struct QueryContext {
    pub query_type: QueryType,
    pub trigger_keyword: String,
    pub command: Option<String>,
    pub search: String,
    pub raw_query: String,
}

pub enum QueryType {
    Input,      // æ™®é€šè¾“å…¥
    Selection,  // é€‰æ‹©æŸ¥è¯¢
}

/// æŸ¥è¯¢ç»“æœ
#[derive(Serialize, Deserialize, Clone)]
pub struct QueryResult {
    pub id: String,
    pub title: String,
    pub subtitle: String,
    pub icon: WoxImage,
    pub score: i32,
    pub plugin_id: String,
    pub context_data: serde_json::Value,
    pub actions: Vec<Action>,
    pub preview: Option<Preview>,
    pub refreshable: bool,
    pub group: Option<String>,
}

/// æ“ä½œ
#[derive(Serialize, Deserialize, Clone)]
pub struct Action {
    pub id: String,
    pub name: String,
    pub icon: Option<WoxImage>,
    pub is_default: bool,
    pub hotkey: Option<String>,
    pub prevent_hide: bool,
}

/// å›¾æ ‡
#[derive(Serialize, Deserialize, Clone)]
pub enum WoxImage {
    Svg(String),           // SVG å†…å®¹
    File(String),          // æ–‡ä»¶è·¯å¾„
    Url(String),           // URL
    Base64(String),        // Base64 ç¼–ç 
    Emoji(String),         // Emoji
    SystemIcon(String),    // ç³»ç»Ÿå›¾æ ‡
}

/// é¢„è§ˆ
#[derive(Serialize, Deserialize, Clone)]
pub enum Preview {
    Text(String),
    Markdown(String),
    Image(String),
    Html(String),
    File(String),
}
```

#### ä¸»å¼•æ“
```rust
// src-tauri/src/core/engine.rs

pub struct LauncherEngine {
    plugin_manager: Arc<PluginManager>,
    index_service: Arc<IndexService>,
    settings: Arc<RwLock<Settings>>,
    query_processor: Arc<QueryProcessor>,
    hotkey_manager: Arc<HotkeyManager>,
    theme_engine: Arc<ThemeEngine>,
    ai_service: Arc<AIService>,
}

impl LauncherEngine {
    pub async fn new() -> Result<Self> {
        // åˆå§‹åŒ–æ•°æ®åº“
        let db = Database::init().await?;
        
        // åˆå§‹åŒ–å„ç»„ä»¶
        let settings = Arc::new(RwLock::new(Settings::load().await?));
        let plugin_manager = Arc::new(PluginManager::new(db.clone()).await?);
        let index_service = Arc::new(IndexService::new(db.clone()).await?);
        let query_processor = Arc::new(QueryProcessor::new());
        let hotkey_manager = Arc::new(HotkeyManager::new()?);
        let theme_engine = Arc::new(ThemeEngine::new().await?);
        let ai_service = Arc::new(AIService::new(settings.clone()).await?);
        
        Ok(Self {
            plugin_manager,
            index_service,
            settings,
            query_processor,
            hotkey_manager,
            theme_engine,
            ai_service,
        })
    }
    
    /// ä¸»æŸ¥è¯¢å…¥å£
    pub async fn query(&self, input: &str) -> Result<Vec<QueryResult>> {
        // 1. è§£ææŸ¥è¯¢
        let ctx = self.query_processor.parse(input)?;
        
        // 2. è·å–åŒ¹é…çš„æ’ä»¶
        let plugins = self.plugin_manager.get_matching_plugins(&ctx).await;
        
        // 3. å¹¶å‘æ‰§è¡ŒæŸ¥è¯¢
        let mut tasks = Vec::new();
        for plugin in plugins {
            let ctx = ctx.clone();
            tasks.push(plugin.query(ctx));
        }
        
        let results_vec = futures::future::join_all(tasks).await;
        
        // 4. èšåˆç»“æœ
        let mut all_results = Vec::new();
        for results in results_vec {
            if let Ok(mut results) = results {
                all_results.append(&mut results);
            }
        }
        
        // 5. æ’åºå’Œè¯„åˆ†
        self.query_processor.rank_results(&mut all_results, &ctx);
        
        Ok(all_results)
    }
    
    /// æ‰§è¡Œæ“ä½œ
    pub async fn execute_action(
        &self,
        result_id: &str,
        action_id: &str
    ) -> Result<()> {
        self.plugin_manager.execute_action(result_id, action_id).await
    }
}
```

### 2. æ’ä»¶ç³»ç»Ÿ (Plugin System)

#### æ–‡ä»¶ç»“æ„
```
src-tauri/src/
â”œâ”€â”€ plugin/
â”‚   â”œâ”€â”€ mod.rs              # æ’ä»¶ç³»ç»Ÿæ ¸å¿ƒ
â”‚   â”œâ”€â”€ manager.rs          # PluginManager
â”‚   â”œâ”€â”€ trait.rs            # Plugin trait
â”‚   â”œâ”€â”€ api.rs              # PluginAPI
â”‚   â”œâ”€â”€ metadata.rs         # æ’ä»¶å…ƒæ•°æ®
â”‚   â”œâ”€â”€ host/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ python.rs       # Python æ’ä»¶ Host
â”‚   â”‚   â”œâ”€â”€ nodejs.rs       # Node.js æ’ä»¶ Host
â”‚   â”‚   â””â”€â”€ script.rs       # è„šæœ¬æ’ä»¶ Runner
â”‚   â””â”€â”€ native/
â”‚       â”œâ”€â”€ mod.rs
â”‚       â”œâ”€â”€ calculator.rs   # è®¡ç®—å™¨æ’ä»¶
â”‚       â”œâ”€â”€ app.rs          # åº”ç”¨æœç´¢æ’ä»¶
â”‚       â”œâ”€â”€ file.rs         # æ–‡ä»¶æœç´¢æ’ä»¶
â”‚       â””â”€â”€ clipboard.rs    # å‰ªè´´æ¿æ’ä»¶
```

#### Plugin Trait
```rust
// src-tauri/src/plugin/trait.rs

#[async_trait]
pub trait Plugin: Send + Sync {
    /// è·å–æ’ä»¶å…ƒæ•°æ®
    fn metadata(&self) -> &PluginMetadata;
    
    /// åˆå§‹åŒ–æ’ä»¶
    async fn init(&mut self, api: PluginAPI) -> Result<()>;
    
    /// æŸ¥è¯¢
    async fn query(&self, ctx: QueryContext) -> Result<Vec<QueryResult>>;
    
    /// æ‰§è¡Œæ“ä½œ
    async fn execute_action(&self, action: &Action, context_data: serde_json::Value) -> Result<()>;
    
    /// å¸è½½æ¸…ç†ï¼ˆå¯é€‰ï¼‰
    async fn on_unload(&self) -> Result<()> {
        Ok(())
    }
    
    /// è®¾ç½®å˜æ›´ï¼ˆå¯é€‰ï¼‰
    async fn on_setting_changed(&self, key: &str, value: &serde_json::Value) -> Result<()> {
        Ok(())
    }
}

/// æ’ä»¶å…ƒæ•°æ®
#[derive(Serialize, Deserialize, Clone)]
pub struct PluginMetadata {
    pub id: String,
    pub name: String,
    pub author: String,
    pub version: String,
    pub min_launcher_version: String,
    pub description: String,
    pub icon: WoxImage,
    pub trigger_keywords: Vec<String>,
    pub commands: Vec<Command>,
    pub settings: Vec<SettingDefinition>,
    pub supported_os: Vec<String>,
    pub plugin_type: PluginType,
}

#[derive(Serialize, Deserialize, Clone)]
pub enum PluginType {
    Native,     // Rust åŸç”Ÿæ’ä»¶
    Python,     // Python æ’ä»¶
    NodeJS,     // Node.js æ’ä»¶
    Script,     // è„šæœ¬æ’ä»¶
}
```

#### Plugin Manager
```rust
// src-tauri/src/plugin/manager.rs

pub struct PluginManager {
    plugins: RwLock<HashMap<String, Box<dyn Plugin>>>,
    python_host: Arc<PythonHost>,
    nodejs_host: Arc<NodeJsHost>,
    script_runner: Arc<ScriptRunner>,
    db: Database,
}

impl PluginManager {
    /// åŠ è½½æ‰€æœ‰æ’ä»¶
    pub async fn load_all_plugins(&self) -> Result<()> {
        // 1. åŠ è½½åŸç”Ÿæ’ä»¶
        self.load_native_plugins().await?;
        
        // 2. æ‰«æå¹¶åŠ è½½ç”¨æˆ·æ’ä»¶
        self.scan_and_load_user_plugins().await?;
        
        Ok(())
    }
    
    /// å®‰è£…æ’ä»¶
    pub async fn install_plugin(&self, url_or_path: &str) -> Result<()> {
        // 1. ä¸‹è½½/å¤åˆ¶æ’ä»¶
        // 2. éªŒè¯ plugin.json
        // 3. è§£å‹åˆ°æ’ä»¶ç›®å½•
        // 4. åŠ è½½æ’ä»¶
        // 5. ä¿å­˜åˆ°æ•°æ®åº“
    }
    
    /// è·å–åŒ¹é…çš„æ’ä»¶
    pub async fn get_matching_plugins(
        &self,
        ctx: &QueryContext
    ) -> Vec<Arc<dyn Plugin>> {
        let plugins = self.plugins.read().await;
        
        plugins.values()
            .filter(|p| {
                // æ£€æŸ¥è§¦å‘å…³é”®è¯
                if ctx.trigger_keyword == "*" {
                    p.metadata().trigger_keywords.contains(&"*".to_string())
                } else {
                    p.metadata().trigger_keywords.contains(&ctx.trigger_keyword)
                }
            })
            .map(|p| Arc::clone(p))
            .collect()
    }
}
```

### 3. ç´¢å¼•æœåŠ¡ (Index Service)

#### æ–‡ä»¶ç»“æ„
```
src-tauri/src/
â”œâ”€â”€ index/
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ app_index.rs        # åº”ç”¨ç´¢å¼•
â”‚   â”œâ”€â”€ file_index.rs       # æ–‡ä»¶ç´¢å¼•
â”‚   â”œâ”€â”€ platform/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ windows.rs      # Windows ç‰¹å®š
â”‚   â”‚   â”œâ”€â”€ macos.rs        # macOS ç‰¹å®š
â”‚   â”‚   â””â”€â”€ linux.rs        # Linux ç‰¹å®š
```

#### App Index
```rust
// src-tauri/src/index/app_index.rs

use tantivy::*;

pub struct AppIndex {
    index: Index,
    reader: IndexReader,
    writer: Arc<RwLock<IndexWriter>>,
    apps: Arc<RwLock<Vec<AppInfo>>>,
}

#[derive(Clone, Serialize, Deserialize)]
pub struct AppInfo {
    pub id: String,
    pub name: String,
    pub path: String,
    pub icon: WoxImage,
    pub app_type: AppType,
    pub description: Option<String>,
    pub keywords: Vec<String>,
}

impl AppIndex {
    pub async fn new() -> Result<Self> {
        // åˆ›å»º Tantivy ç´¢å¼•
        let schema = Self::build_schema();
        let index = Index::create_in_ram(schema);
        let reader = index.reader()?;
        let writer = Arc::new(RwLock::new(index.writer(50_000_000)?));
        
        Ok(Self {
            index,
            reader,
            writer,
            apps: Arc::new(RwLock::new(Vec::new())),
        })
    }
    
    fn build_schema() -> Schema {
        let mut schema_builder = Schema::builder();
        schema_builder.add_text_field("name", TEXT | STORED);
        schema_builder.add_text_field("path", STORED);
        schema_builder.add_text_field("description", TEXT);
        schema_builder.add_text_field("keywords", TEXT);
        schema_builder.build()
    }
    
    /// é‡å»ºç´¢å¼•
    pub async fn rebuild(&self) -> Result<()> {
        let apps = self.scan_system_apps().await?;
        
        let mut writer = self.writer.write().await;
        writer.delete_all_documents()?;
        
        for app in &apps {
            writer.add_document(self.app_to_document(app)?)?;
        }
        
        writer.commit()?;
        *self.apps.write().await = apps;
        
        Ok(())
    }
    
    /// æœç´¢åº”ç”¨
    pub async fn search(&self, query: &str, limit: usize) -> Result<Vec<AppInfo>> {
        // 1. Tantivy å…¨æ–‡æœç´¢
        let searcher = self.reader.searcher();
        // å®ç°æœç´¢é€»è¾‘...
        
        // 2. æ¨¡ç³ŠåŒ¹é…ï¼ˆç”¨äºçŸ­æŸ¥è¯¢ï¼‰
        let apps = self.apps.read().await;
        let matcher = fuzzy_matcher::skim::SkimMatcherV2::default();
        let mut scored: Vec<_> = apps.iter()
            .filter_map(|app| {
                matcher.fuzzy_match(&app.name, query)
                    .map(|score| (app.clone(), score))
            })
            .collect();
        
        scored.sort_by_key(|(_, score)| -score);
        Ok(scored.into_iter().take(limit).map(|(app, _)| app).collect())
    }
    
    #[cfg(target_os = "windows")]
    async fn scan_system_apps(&self) -> Result<Vec<AppInfo>> {
        // æ‰«æ Windows åº”ç”¨
        // - Start Menu
        // - UWP Apps
        // - Registry entries
    }
    
    #[cfg(target_os = "macos")]
    async fn scan_system_apps(&self) -> Result<Vec<AppInfo>> {
        // æ‰«æ macOS åº”ç”¨
        // - /Applications
        // - ~/Applications
        // - Spotlight metadata
    }
    
    #[cfg(target_os = "linux")]
    async fn scan_system_apps(&self) -> Result<Vec<AppInfo>> {
        // æ‰«æ Linux åº”ç”¨
        // - .desktop files
        // - /usr/share/applications
        // - ~/.local/share/applications
    }
}
```

### 4. çƒ­é”®ç®¡ç† (Hotkey Manager)

```rust
// src-tauri/src/hotkey/mod.rs

use global_hotkey::*;

pub struct HotkeyManager {
    manager: GlobalHotKeyManager,
    receiver: GlobalHotKeyEventReceiver,
    registered: RwLock<HashMap<HotKey, HotkeyCallback>>,
}

type HotkeyCallback = Box<dyn Fn() + Send + Sync>;

impl HotkeyManager {
    pub fn new() -> Result<Self> {
        let manager = GlobalHotKeyManager::new()?;
        let receiver = GlobalHotKeyEvent::receiver();
        
        Ok(Self {
            manager,
            receiver,
            registered: RwLock::new(HashMap::new()),
        })
    }
    
    /// æ³¨å†Œä¸»çƒ­é”®
    pub fn register_main_hotkey<F>(&self, keys: &str, callback: F) -> Result<()>
    where
        F: Fn() + Send + Sync + 'static,
    {
        let hotkey = HotKey::from_str(keys)?;
        self.manager.register(hotkey)?;
        self.registered.write().await.insert(hotkey, Box::new(callback));
        Ok(())
    }
    
    /// ç›‘å¬çƒ­é”®äº‹ä»¶
    pub async fn listen(&self) {
        while let Ok(event) = self.receiver.try_recv() {
            if event.state == HotKeyState::Pressed {
                let registered = self.registered.read().await;
                if let Some(callback) = registered.get(&event.id) {
                    callback();
                }
            }
        }
    }
}
```

### 5. Tauri Commands

```rust
// src-tauri/src/commands/mod.rs

use tauri::State;

#[tauri::command]
pub async fn query(
    input: String,
    engine: State<'_, Arc<LauncherEngine>>
) -> Result<Vec<QueryResult>, String> {
    engine.query(&input).await
        .map_err(|e| e.to_string())
}

#[tauri::command]
pub async fn execute_action(
    result_id: String,
    action_id: String,
    engine: State<'_, Arc<LauncherEngine>>
) -> Result<(), String> {
    engine.execute_action(&result_id, &action_id).await
        .map_err(|e| e.to_string())
}

#[tauri::command]
pub async fn get_settings(
    engine: State<'_, Arc<LauncherEngine>>
) -> Result<Settings, String> {
    Ok(engine.settings.read().await.clone())
}

#[tauri::command]
pub async fn update_setting(
    key: String,
    value: serde_json::Value,
    engine: State<'_, Arc<LauncherEngine>>
) -> Result<(), String> {
    engine.settings.write().await.set(&key, value);
    Ok(())
}

#[tauri::command]
pub async fn get_plugins(
    engine: State<'_, Arc<LauncherEngine>>
) -> Result<Vec<PluginMetadata>, String> {
    engine.plugin_manager.get_all_metadata().await
        .map_err(|e| e.to_string())
}

#[tauri::command]
pub async fn install_plugin(
    url_or_path: String,
    engine: State<'_, Arc<LauncherEngine>>
) -> Result<(), String> {
    engine.plugin_manager.install_plugin(&url_or_path).await
        .map_err(|e| e.to_string())
}

#[tauri::command]
pub async fn uninstall_plugin(
    plugin_id: String,
    engine: State<'_, Arc<LauncherEngine>>
) -> Result<(), String> {
    engine.plugin_manager.uninstall_plugin(&plugin_id).await
        .map_err(|e| e.to_string())
}

#[tauri::command]
pub async fn rebuild_index(
    engine: State<'_, Arc<LauncherEngine>>
) -> Result<(), String> {
    engine.index_service.rebuild_all().await
        .map_err(|e| e.to_string())
}

#[tauri::command]
pub async fn ai_chat(
    messages: Vec<ChatMessage>,
    engine: State<'_, Arc<LauncherEngine>>
) -> Result<String, String> {
    engine.ai_service.chat(messages).await
        .map_err(|e| e.to_string())
}
```

### 6. å‰ç«¯å®ç°

#### ä¸»æœç´¢ç»„ä»¶
```typescript
// src/components/SearchBox.tsx

import { invoke } from '@tauri-apps/api/core';
import { useEffect, useState, useCallback } from 'react';
import { debounce } from 'lodash-es';

interface QueryResult {
  id: string;
  title: string;
  subtitle: string;
  icon: WoxImage;
  score: number;
  actions: Action[];
  preview?: Preview;
}

export function SearchBox() {
  const [query, setQuery] = useState('');
  const [results, setResults] = useState<QueryResult[]>([]);
  const [selectedIndex, setSelectedIndex] = useState(0);
  const [loading, setLoading] = useState(false);
  const [showActionPanel, setShowActionPanel] = useState(false);
  
  // é˜²æŠ–æŸ¥è¯¢
  const debouncedQuery = useCallback(
    debounce(async (input: string) => {
      if (!input.trim()) {
        setResults([]);
        return;
      }
      
      setLoading(true);
      try {
        const results = await invoke<QueryResult[]>('query', { input });
        setResults(results);
        setSelectedIndex(0);
      } catch (error) {
        console.error('Query failed:', error);
      } finally {
        setLoading(false);
      }
    }, 100),
    []
  );
  
  useEffect(() => {
    debouncedQuery(query);
  }, [query, debouncedQuery]);
  
  const handleKeyDown = async (e: React.KeyboardEvent) => {
    switch (e.key) {
      case 'Enter':
        e.preventDefault();
        await executeDefaultAction();
        break;
        
      case 'ArrowDown':
        e.preventDefault();
        setSelectedIndex(i => Math.min(i + 1, results.length - 1));
        break;
        
      case 'ArrowUp':
        e.preventDefault();
        setSelectedIndex(i => Math.max(i - 1, 0));
        break;
        
      case 'Escape':
        e.preventDefault();
        if (showActionPanel) {
          setShowActionPanel(false);
        } else {
          await invoke('hide_app');
        }
        break;
        
      case 'j':
        if (e.altKey || e.metaKey) {
          e.preventDefault();
          setShowActionPanel(!showActionPanel);
        }
        break;
    }
  };
  
  const executeDefaultAction = async () => {
    const result = results[selectedIndex];
    if (!result) return;
    
    const defaultAction = result.actions.find(a => a.is_default) || result.actions[0];
    if (!defaultAction) return;
    
    try {
      await invoke('execute_action', {
        resultId: result.id,
        actionId: defaultAction.id
      });
      
      if (!defaultAction.prevent_hide) {
        await invoke('hide_app');
      }
    } catch (error) {
      console.error('Action execution failed:', error);
    }
  };
  
  return (
    <div className="search-container">
      <input
        type="text"
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        onKeyDown={handleKeyDown}
        placeholder="Type to search..."
        className="search-input"
        autoFocus
      />
      
      {loading && <LoadingIndicator />}
      
      <ResultList
        results={results}
        selectedIndex={selectedIndex}
        onSelect={setSelectedIndex}
      />
      
      {showActionPanel && (
        <ActionPanel
          result={results[selectedIndex]}
          onClose={() => setShowActionPanel(false)}
        />
      )}
    </div>
  );
}
```

#### ç»“æœåˆ—è¡¨
```typescript
// src/components/ResultList.tsx

import { useVirtualizer } from '@tanstack/react-virtual';

export function ResultList({ results, selectedIndex, onSelect }) {
  const parentRef = useRef<HTMLDivElement>(null);
  
  const virtualizer = useVirtualizer({
    count: results.length,
    getScrollElement: () => parentRef.current,
    estimateSize: () => 60,
    overscan: 5,
  });
  
  return (
    <div ref={parentRef} className="result-list">
      <div
        style={{
          height: `${virtualizer.getTotalSize()}px`,
          position: 'relative',
        }}
      >
        {virtualizer.getVirtualItems().map((virtualItem) => {
          const result = results[virtualItem.index];
          const isSelected = virtualItem.index === selectedIndex;
          
          return (
            <ResultItem
              key={result.id}
              result={result}
              isSelected={isSelected}
              onClick={() => onSelect(virtualItem.index)}
              style={{
                position: 'absolute',
                top: 0,
                left: 0,
                width: '100%',
                height: `${virtualItem.size}px`,
                transform: `translateY(${virtualItem.start}px)`,
              }}
            />
          );
        })}
      </div>
    </div>
  );
}
```

---

## ğŸ—“ï¸ å®æ–½è·¯çº¿å›¾

### Phase 1: åŸºç¡€æ¡†æ¶ (2-3 å‘¨)

**ç›®æ ‡**: æ­å»ºæ ¸å¿ƒæ¶æ„ï¼Œå®ç°åŸºæœ¬åŠŸèƒ½

#### Week 1: é¡¹ç›®åˆå§‹åŒ–
- [ ] æ¸…ç†ç°æœ‰æ¨¡æ¿ä»£ç 
- [ ] é…ç½® Cargo.toml ä¾èµ–
- [ ] é…ç½® Tauri çª—å£ï¼ˆæ— è¾¹æ¡†ã€é€æ˜ã€ç½®é¡¶ï¼‰
- [ ] è®¾ç½® TypeScript é¡¹ç›®ç»“æ„
- [ ] é…ç½® Tailwind CSS
- [ ] åˆ›å»ºåŸºç¡€ UI ç»„ä»¶åº“

#### Week 2: æ ¸å¿ƒå¼•æ“
- [ ] å®ç° `LauncherEngine` éª¨æ¶
- [ ] å®ç° `QueryProcessor` æŸ¥è¯¢è§£æ
- [ ] å®ç°åŸºç¡€ Tauri Commands
- [ ] å®ç°æ•°æ®åº“å±‚ (SQLite + sqlx)
- [ ] å®ç°è®¾ç½®ç®¡ç†ç³»ç»Ÿ

#### Week 3: UI ä¸äº¤äº’
- [ ] å®ç° SearchBox ç»„ä»¶
- [ ] å®ç° ResultList è™šæ‹Ÿæ»šåŠ¨
- [ ] å®ç°é”®ç›˜å¯¼èˆª
- [ ] å®ç°å…¨å±€çƒ­é”®ç›‘å¬
- [ ] çª—å£æ˜¾ç¤º/éšè—åŠ¨ç”»

**é‡Œç¨‹ç¢‘**: èƒ½å¤Ÿæ˜¾ç¤ºçª—å£ï¼Œæ¥å—è¾“å…¥ï¼Œå“åº”çƒ­é”®

---

### Phase 2: æ ¸å¿ƒæ’ä»¶ (3-4 å‘¨)

**ç›®æ ‡**: å®ç°æœ€é‡è¦çš„åŸç”Ÿæ’ä»¶

#### Week 4: æ’ä»¶ç³»ç»Ÿæ¡†æ¶
- [ ] å®šä¹‰ `Plugin` trait
- [ ] å®ç° `PluginManager`
- [ ] å®ç° `PluginAPI`
- [ ] åˆ›å»ºæ’ä»¶æ³¨å†Œæœºåˆ¶
- [ ] å®ç°æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†

#### Week 5: åº”ç”¨æœç´¢æ’ä»¶
- [ ] å®ç° `AppIndex` ç´¢å¼•æœåŠ¡
- [ ] Windows: æ‰«æå¼€å§‹èœå•ã€UWP åº”ç”¨
- [ ] macOS: æ‰«æ /Applications
- [ ] Linux: è§£æ .desktop æ–‡ä»¶
- [ ] å®ç°åº”ç”¨å¯åŠ¨åŠŸèƒ½
- [ ] å›¾æ ‡æå–å’Œç¼“å­˜

#### Week 6: è®¡ç®—å™¨ & æ–‡ä»¶æ’ä»¶
- [ ] è®¡ç®—å™¨æ’ä»¶ï¼ˆè¡¨è¾¾å¼è§£æã€å‡½æ•°æ”¯æŒï¼‰
- [ ] æ–‡ä»¶æœç´¢æ’ä»¶åŸºç¡€
- [ ] æ–‡ä»¶ç´¢å¼•æœåŠ¡
- [ ] æ–‡ä»¶æ“ä½œï¼ˆæ‰“å¼€ã€å¤åˆ¶è·¯å¾„ç­‰ï¼‰

#### Week 7: è®¾ç½®ç•Œé¢
- [ ] è®¾ç½®ç•Œé¢ UI
- [ ] é€šç”¨è®¾ç½®ï¼ˆçƒ­é”®ã€ä¸»é¢˜ã€è¯­è¨€ï¼‰
- [ ] æ’ä»¶è®¾ç½®
- [ ] è®¾ç½®æŒä¹…åŒ–
- [ ] å¯¼å…¥/å¯¼å‡ºè®¾ç½®

**é‡Œç¨‹ç¢‘**: å¯ä»¥æœç´¢å’Œå¯åŠ¨åº”ç”¨ï¼Œè¿›è¡Œè®¡ç®—ï¼Œç®¡ç†è®¾ç½®

---

### Phase 3: æ’ä»¶ç”Ÿæ€ (3-4 å‘¨)

**ç›®æ ‡**: æ”¯æŒå¤–éƒ¨æ’ä»¶ï¼Œæ„å»ºæ’ä»¶ç³»ç»Ÿ

#### Week 8-9: Python æ’ä»¶æ”¯æŒ
- [ ] ç ”ç©¶ PyO3 / è¿›ç¨‹é€šä¿¡æ–¹æ¡ˆ
- [ ] å®ç° Python æ’ä»¶ Host
- [ ] å®šä¹‰ Python Plugin API
- [ ] åˆ›å»º Python SDK åŒ… (`ilauncher-plugin`)
- [ ] ç¼–å†™ç¤ºä¾‹æ’ä»¶
- [ ] æµ‹è¯•æ’ä»¶åŠ è½½å’Œé€šä¿¡

#### Week 10: Node.js & è„šæœ¬æ’ä»¶
- [ ] å®ç° Node.js æ’ä»¶ Hostï¼ˆè¿›ç¨‹é€šä¿¡ï¼‰
- [ ] åˆ›å»º Node.js SDK (`@ilauncher/plugin`)
- [ ] å®ç°è„šæœ¬æ’ä»¶ Runnerï¼ˆJSON-RPCï¼‰
- [ ] æ”¯æŒ .py, .js, .sh è„šæœ¬æ’ä»¶

#### Week 11: æ’ä»¶å•†åº—
- [ ] æ’ä»¶å•†åº— UI
- [ ] æ’ä»¶æœç´¢å’Œæµè§ˆ
- [ ] æ’ä»¶å®‰è£…/å¸è½½
- [ ] æ’ä»¶æ›´æ–°æ£€æŸ¥
- [ ] æ’ä»¶è¯„åˆ†å’Œè¯„è®ºï¼ˆæœ¬åœ°ï¼‰

**é‡Œç¨‹ç¢‘**: æ”¯æŒåŠ è½½å¤–éƒ¨æ’ä»¶ï¼Œç”¨æˆ·å¯ä»¥å®‰è£…æ’ä»¶

---

### Phase 4: é«˜çº§åŠŸèƒ½ (2-3 å‘¨)

**ç›®æ ‡**: å®ç°å·®å¼‚åŒ–ç‰¹æ€§

#### Week 12: AI é›†æˆ
- [ ] AI Service æ¶æ„
- [ ] OpenAI API é›†æˆ
- [ ] Anthropic Claude é›†æˆ
- [ ] Ollama æœ¬åœ°æ¨¡å‹æ”¯æŒ
- [ ] AI èŠå¤©ç•Œé¢
- [ ] AI è¾…åŠ©æŸ¥è¯¢

#### Week 13: å¢å¼ºåŠŸèƒ½
- [ ] å‰ªè´´æ¿å†å²æ’ä»¶
- [ ] Action Panel UI
- [ ] é¢„è§ˆé¢æ¿ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€Markdownï¼‰
- [ ] ä¸»é¢˜ç¼–è¾‘å™¨
- [ ] å¤šè¯­è¨€æ”¯æŒ (i18n)

#### Week 14: æ€§èƒ½ä¼˜åŒ–
- [ ] æŸ¥è¯¢æ€§èƒ½åˆ†æ
- [ ] ç´¢å¼•ä¼˜åŒ–
- [ ] å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–
- [ ] å†…å­˜å ç”¨ä¼˜åŒ–
- [ ] å¹¶å‘æŸ¥è¯¢ä¼˜åŒ–

**é‡Œç¨‹ç¢‘**: åŠŸèƒ½å®Œæ•´ï¼Œæ€§èƒ½ä¼˜ç§€

---

### Phase 5: æ‰“ç£¨å‘å¸ƒ (2 å‘¨)

**ç›®æ ‡**: å‡†å¤‡å…¬å¼€å‘å¸ƒ

#### Week 15: è·¨å¹³å°æµ‹è¯•
- [ ] Windows 10/11 æµ‹è¯•
- [ ] macOS (Intel + Apple Silicon) æµ‹è¯•
- [ ] Linux (Ubuntu, Fedora, Arch) æµ‹è¯•
- [ ] ä¿®å¤å¹³å°ç‰¹å®š Bug
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

#### Week 16: æ–‡æ¡£å’Œå‘å¸ƒ
- [ ] ç”¨æˆ·æ–‡æ¡£
- [ ] æ’ä»¶å¼€å‘æ–‡æ¡£
- [ ] API æ–‡æ¡£
- [ ] è´¡çŒ®æŒ‡å—
- [ ] è‡ªåŠ¨æ›´æ–°æœºåˆ¶
- [ ] GitHub Actions CI/CD
- [ ] æ‰“åŒ…å‘å¸ƒï¼ˆ.exe, .dmg, .AppImageï¼‰

**é‡Œç¨‹ç¢‘**: v1.0.0 å‘å¸ƒ

---

## âœ… å¼€å‘ä»»åŠ¡æ¸…å•

### ç«‹å³å¼€å§‹ (æœ¬å‘¨)

#### 1. é¡¹ç›®ç»“æ„é‡ç»„
```bash
# æ¸…ç†æ¨¡æ¿æ–‡ä»¶
- [ ] åˆ é™¤ src/App.tsx æ¨¡æ¿ä»£ç 
- [ ] åˆ é™¤ src/App.css æ¨¡æ¿æ ·å¼
- [ ] æ¸…ç† src-tauri/src/lib.rs ç¤ºä¾‹ä»£ç 

# åˆ›å»ºæ–°ç»“æ„
- [ ] åˆ›å»º src/components/ ç›®å½•
- [ ] åˆ›å»º src/hooks/ ç›®å½•
- [ ] åˆ›å»º src/store/ ç›®å½•
- [ ] åˆ›å»º src/types/ ç›®å½•
- [ ] åˆ›å»º src/utils/ ç›®å½•

- [ ] åˆ›å»º src-tauri/src/core/ ç›®å½•
- [ ] åˆ›å»º src-tauri/src/plugin/ ç›®å½•
- [ ] åˆ›å»º src-tauri/src/index/ ç›®å½•
- [ ] åˆ›å»º src-tauri/src/hotkey/ ç›®å½•
- [ ] åˆ›å»º src-tauri/src/commands/ ç›®å½•
- [ ] åˆ›å»º src-tauri/src/database/ ç›®å½•
```

#### 2. ä¾èµ–å®‰è£…

**å‰ç«¯ä¾èµ–**
```bash
npm install -D tailwindcss postcss autoprefixer
npm install zustand
npm install @radix-ui/react-dialog @radix-ui/react-popover
npm install framer-motion
npm install @tanstack/react-virtual
npm install lucide-react
npm install clsx tailwind-merge
```

**åç«¯ä¾èµ–** (æ›´æ–° Cargo.toml)
```toml
[dependencies]
tauri = { version = "2", features = [] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"
tokio = { version = "1", features = ["full"] }
sqlx = { version = "0.7", features = ["sqlite", "runtime-tokio"] }
tantivy = "0.21"
fuzzy-matcher = "0.3"
global-hotkey = "0.5"
anyhow = "1"
tracing = "0.1"
tracing-subscriber = "0.3"
```

#### 3. åŸºç¡€æ–‡ä»¶åˆ›å»º

- [ ] `src-tauri/src/core/mod.rs` - æ ¸å¿ƒæ¨¡å—
- [ ] `src-tauri/src/core/types.rs` - ç±»å‹å®šä¹‰
- [ ] `src-tauri/src/commands/mod.rs` - Tauri commands
- [ ] `src/types/index.ts` - TypeScript ç±»å‹
- [ ] `src/components/SearchBox.tsx` - æœç´¢æ¡†ç»„ä»¶
- [ ] `src/store/useAppStore.ts` - å…¨å±€çŠ¶æ€
- [ ] `tailwind.config.js` - Tailwind é…ç½®

#### 4. Tauri é…ç½®

```json
// src-tauri/tauri.conf.json
{
  "tauri": {
    "windows": [{
      "title": "iLauncher",
      "width": 800,
      "height": 600,
      "decorations": false,
      "transparent": true,
      "alwaysOnTop": true,
      "skipTaskbar": true,
      "center": true,
      "visible": false,
      "resizable": false
    }]
  }
}
```

### ä¸‹ä¸€æ­¥ (æœ¬æœˆ)

#### æ ¸å¿ƒåŠŸèƒ½å®ç°ä¼˜å…ˆçº§

**P0 - å¿…é¡»æœ‰**
1. [ ] æŸ¥è¯¢å¤„ç†å¼•æ“
2. [ ] åº”ç”¨æœç´¢æ’ä»¶
3. [ ] å…¨å±€çƒ­é”®
4. [ ] åŸºç¡€ UI ç»„ä»¶
5. [ ] è®¾ç½®ç®¡ç†

**P1 - åº”è¯¥æœ‰**
6. [ ] è®¡ç®—å™¨æ’ä»¶
7. [ ] æ–‡ä»¶æœç´¢æ’ä»¶
8. [ ] æ’ä»¶ç®¡ç†å™¨
9. [ ] ä¸»é¢˜ç³»ç»Ÿ
10. [ ] é”®ç›˜å¿«æ·é”®

**P2 - å¯ä»¥æœ‰**
11. [ ] AI é›†æˆ
12. [ ] å‰ªè´´æ¿å†å²
13. [ ] é¢„è§ˆåŠŸèƒ½
14. [ ] æ’ä»¶å•†åº—
15. [ ] è‡ªåŠ¨æ›´æ–°

---

## ğŸ“Š æŠ€æœ¯å†³ç­–

### ä¸ºä»€ä¹ˆé€‰æ‹© Tauriï¼Ÿ

**ç›¸æ¯” Wox (Go + Flutter):**

| å¯¹æ¯”é¡¹ | Wox (Go + Flutter) | iLauncher (Tauri + Rust) |
|--------|-------------------|--------------------------|
| æ€§èƒ½ | å¥½ | **æ›´å¥½** (Rust æ›´å¿«) |
| å†…å­˜å ç”¨ | ~100MB | **~30MB** |
| åŒ…ä½“ç§¯ | ~80MB | **~15MB** |
| å¯åŠ¨é€Ÿåº¦ | å¿« | **æ›´å¿«** |
| ç³»ç»Ÿé›†æˆ | ä¸­ç­‰ | **ä¼˜ç§€** |
| å‰ç«¯ç”Ÿæ€ | Flutter | **React/Vue (æ›´ä¸°å¯Œ)** |
| å¼€å‘ä½“éªŒ | å¥½ | **å¾ˆå¥½** |
| è·¨å¹³å° | æ”¯æŒ | **åŸç”Ÿæ”¯æŒ** |

### æ¶æ„ä¼˜åŠ¿

1. **å•ä¸€æŠ€æœ¯æ ˆ**: Rust + TypeScriptï¼Œç»Ÿä¸€çš„å¼€å‘ä½“éªŒ
2. **åŸç”Ÿæ€§èƒ½**: Rust æ ¸å¿ƒæä¾›æè‡´æ€§èƒ½
3. **ç°ä»£ UI**: React/Tailwind æä¾›çµæ´»çš„ UI å¼€å‘
4. **å®‰å…¨æ€§**: Rust çš„å†…å­˜å®‰å…¨ä¿è¯
5. **å¯æ‰©å±•æ€§**: æ¸…æ™°çš„æ’ä»¶æ¶æ„

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### æ€§èƒ½ç›®æ ‡
- [ ] å¯åŠ¨æ—¶é—´ < 500ms
- [ ] æŸ¥è¯¢å“åº” < 50ms (æœ¬åœ°)
- [ ] æŸ¥è¯¢å“åº” < 200ms (ç½‘ç»œ)
- [ ] å†…å­˜å ç”¨ < 50MB (ç©ºé—²)
- [ ] ç´¢å¼•é‡å»º < 5s (1000 åº”ç”¨)

### åŠŸèƒ½ç›®æ ‡
- [ ] æ”¯æŒ 10+ åŸç”Ÿæ’ä»¶
- [ ] æ”¯æŒ Python/Node.js æ’ä»¶
- [ ] æ”¯æŒ 3 ç§ AI æä¾›å•†
- [ ] æ”¯æŒ 10+ ä¸»é¢˜
- [ ] æ”¯æŒ 5+ è¯­è¨€

### è´¨é‡ç›®æ ‡
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] é›†æˆæµ‹è¯•è¦†ç›–æ ¸å¿ƒæµç¨‹
- [ ] é›¶ Clippy è­¦å‘Š
- [ ] å®Œæ•´çš„æ–‡æ¡£

---

## ğŸ“š å‚è€ƒèµ„æº

### Wox ç›¸å…³
- [Wox GitHub](https://github.com/Wox-launcher/Wox)
- [Wox æ–‡æ¡£](https://wox-launcher.github.io/Wox/#/)
- [Wox æ’ä»¶å¼€å‘](https://wox-launcher.github.io/Wox/#/full_featured_plugin_guide)

### Tauri ç›¸å…³
- [Tauri å®˜æ–¹æ–‡æ¡£](https://tauri.app/)
- [Tauri Examples](https://github.com/tauri-apps/tauri/tree/dev/examples)
- [Awesome Tauri](https://github.com/tauri-apps/awesome-tauri)

### æŠ€æœ¯æ–‡æ¡£
- [Tantivy æ–‡æ¡£](https://docs.rs/tantivy/)
- [SQLx æ–‡æ¡£](https://docs.rs/sqlx/)
- [Global Hotkey](https://docs.rs/global-hotkey/)
- [PyO3 æ–‡æ¡£](https://pyo3.rs/)

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ
- Rust: `cargo fmt` + `cargo clippy`
- TypeScript: ESLint + Prettier
- æäº¤ä¿¡æ¯: Conventional Commits

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### [Unreleased]
- é¡¹ç›®åˆå§‹åŒ–
- å®Œæˆæ¶æ„è®¾è®¡
- ç¼–å†™å®æ–½è®¡åˆ’

---

**æœ€åæ›´æ–°**: 2025-11-03
**ç‰ˆæœ¬**: 0.1.0-alpha
**çŠ¶æ€**: è§„åˆ’é˜¶æ®µ
