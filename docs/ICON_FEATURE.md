# 文件图标显示功能

## 功能说明

UI 搜索文件时，现在会显示真实的文件图标，而不是通用的 emoji 表情。

## 实现细节

### 1. 图标提取（`icon_cache.rs`）
- 使用 Windows Shell API (`SHGetFileInfoW`) 提取文件图标
- 将 HICON 转换为 48x48 PNG 格式（高清晰度）
- 直接返回 base64 编码的图标数据（内存缓存）

### 2. 智能缓存
- **按扩展名缓存**：`.txt`、`.pdf`、`.exe` 等
- **文件夹统一图标**：所有文件夹共享一个图标
- **内存缓存**：避免重复提取相同类型文件的图标

### 3. 预热机制
- 启动时后台预加载常见文件类型图标
- 包括：txt, pdf, doc, xls, jpg, png, mp3, mp4, zip, exe 等

### 4. 降级策略
- 如果图标提取失败，自动降级到 emoji 图标
- 确保搜索不会因图标问题而失败

## 使用方式

无需配置，功能自动启用：
1. 用户搜索文件
2. 系统自动提取并缓存图标
3. 搜索结果显示真实图标

## 性能优化

- **按需提取**：仅提取搜索结果中出现的文件类型
- **持久缓存**：同类型文件复用已提取的图标
- **异步预热**：不阻塞启动流程

## 清理机制

图标缓存会在以下情况清理：
- 应用重启时自动清理旧图标
- 临时目录会定期被系统清理

## API

```rust
// 获取文件图标路径
pub fn get_file_icon(file_path: &str, is_dir: bool) -> Result<String>

// 清理图标缓存
pub fn clear_icon_cache() -> Result<()>

// 预热常见图标
pub fn warmup_icon_cache()
```
